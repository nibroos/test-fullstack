import{N as te,P as ae,G as oe,j as se,r as M,Q as re,h as le,l as g,o as n,c as i,b as m,w as d,d as h,t as l,m as t,a as e,v as ne,aa as ie,n as S,x as q,F,s as L,J as de,L as ce,z as ue,T as me,H as pe}from"./entry.1de9dfe4.js";import{u as fe}from"./index.dbb1bd5f.js";import{u as _e}from"./useProducts.44416419.js";import{d as N,r as he,m as xe,u as be,a as j}from"./validationRules.6a62d1e7.js";import"./useConfig.8dee7b20.js";const ve={class:"sm:w-full"},ge={class:"flex flex-row justify-between px-6 py-4 border-b border-zinc-200 dark:border-zinc-800 rounded-t-full"},ke=e("div",{class:"text-zinc-900 dark:text-zinc-50 font-bold text-xl"}," Buat transaksi baru ",-1),ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M6.225 4.811a1 1 0 0 0-1.414 1.414L10.586 12L4.81 17.775a1 1 0 1 0 1.414 1.414L12 13.414l5.775 5.775a1 1 0 0 0 1.414-1.414L13.414 12l5.775-5.775a1 1 0 0 0-1.414-1.414L12 10.586L6.225 4.81Z"})],-1),we=[ye],ze=["onSubmit"],Pe={class:"px-6 py-4 flex flex-col"},Ve={class:"flex flex-row md:flex-col justify-between"},Ce={class:"flex flex-col gap-3 pr-3 w-full"},Te={class:"flex flex-col gap-1"},Me=e("label",{for:"quantity",class:"block font-bold text-sm text-gray-700 dark:text-zinc-100"},[h(" Kuantitas "),e("span",{class:"text-rose-500"},"*")],-1),Se={class:"relative text-gray-400 transition focus-within:text-emerald-500 hover:text-emerald-500 after:text-emerald-500"},qe={class:"text-rose-700 text-xs mt-1 flex flex-col ml-4"},Fe={class:"list-disc list-outside"},Le={key:0},Ne={class:"flex flex-col gap-1"},je=e("label",{for:"productOptions",class:"block font-bold text-gray-700 dark:text-zinc-100 mb-1"},[h(" Produk "),e("span",{class:"text-rose-500"},"*")],-1),Be={slot:"search","slot-scope":"props"},Ie={class:"option__desc"},Re={class:"option__title"},Ee={class:"option__small"},He={class:"text-rose-700 text-xs mt-1 flex flex-col ml-4"},Oe={class:"list-disc list-outside"},Ue={key:0},Ae={class:"flex flex-col gap-1"},De=e("label",{class:"block font-bold text-sm text-gray-700 dark:text-zinc-100"}," Harga produk ",-1),Ge={class:"text-zinc-500 dark:text-gray-400 transition focus-within:text-emerald-500 hover:text-emerald-500 after:text-emerald-500 dark:focus-within:text-emerald-500 dark:hover:text-emerald-500 dark:after:text-emerald-500"},Ke={class:"flex flex-col gap-1"},$e=e("label",{class:"block font-bold text-sm text-gray-700 dark:text-zinc-100"}," Pembayaran ",-1),Je={class:"text-zinc-500 dark:text-gray-400 transition focus-within:text-emerald-500 hover:text-emerald-500 after:text-emerald-500 dark:focus-within:text-emerald-500 dark:hover:text-emerald-500 dark:after:text-emerald-500"},Qe={class:"bg-zinc-100 dark:bg-zinc-950 px-6 py-4 rounded-b-xl"},Ze=["disabled"],We={class:"inline-block animate-spin w-4 h-4 mr-2 border-t-2 border-t-white border-r-2 border-r-white border-b-2 border-b-white border-l-2 border-l-blue-600 rounded-full"},Xe={key:0},Ye={key:1,class:"font-bold"},it={__name:"ButtonModalCreateTransactionComponent",emits:"updateCurrentSearchTransaction",setup(et,{emit:tt}){const B=ue();N("required",he),N("min",xe);const I={product_id:"required|min:1",quantity:"required|min:0"},{validate:R,errors:p}=be({validationSchema:I}),{value:E}=j("product_id",null,{initialValue:"",label:"Harga"}),{value:c}=j("quantity",null,{initialValue:"",label:"Kuantitas"});let H="",u=0,O=0;const{storeTransaction:U,validationErrors:k,isLoading:x,rupiahNumberInputFormat:at,pcsNumberFormatIntegerInputFormat:A,optionSelectedProduct:b,rupiah:y}=fe(),w=te(),f=ae(),{productOptions:z,selectProducts:P,isLoadingProductOptions:V}=_e(),o=oe({product_id:E,quantity:c,product_name:H,product_price:u,payment_amount:O});function D(){R().then(a=>{a.valid&&U(o)})}se(()=>{if(w.value.successCreateTransaction===!0&&(o.product_id="",o.quantity="",o.product_name="",o.payment_amount="",f.create=!1,w.value.successCreateTransaction=!1),o.product_id){let a=z.value.find(K,{param:parseInt(o.product_id)});if(a){const r=Object.values(a);o.product_name=r[1]}}o.quantity&&(o.payment_amount=u*o.quantity)});const _=M("Cari produk"),C=["Cari nama produk","pisang...","sandal","SEPATU.."],G=()=>{_.value=C[Math.floor(Math.random()*C.length)]};let v="";function T(){return v=setInterval(G,3e3)}re(()=>clearInterval(v)),le(()=>{P(),T()});function K(a){return a.id===this.param}const $=a=>{a&&(o.product_id=a.id,u=a.price,o.product_price=a.price,o.payment_amount=u*o.quantity)},J=M(""),Q=a=>{console.log(a),clearInterval(v),J.value=a,_.value=a,a||(T(),_.value="Cari produk"),V.value=!0,P(a)};return(a,r)=>{const Z=me,W=pe,X=g("vue-number"),Y=g("VueMultiselect"),ee=g("VueFinalModal");return n(),i("div",ve,[m(W,null,{default:d(()=>[m(Z,null,{default:d(()=>[h("Buat akun â€¢ "+l(t(B).public.APP_NAME),1)]),_:1})]),_:1}),m(ee,{modelValue:t(f).create,"onUpdate:modelValue":r[4]||(r[4]=s=>t(f).create=s),classes:"flex justify-center items-center","content-class":"relative flex flex-col max-h-full border dark:border-zinc-800 rounded-xl bg-white dark:bg-zinc-900 w-7/12","esc-to-close":!0,"focus-trap":!0,drag:!0,"lock-scroll":!0},{default:d(()=>[e("div",ge,[ke,e("div",{onClick:r[0]||(r[0]=s=>t(f).create=!1),class:"flex items-center text-center text-zinc-900 dark:text-zinc-50 rounded-full hover:bg-zinc-300 dark:hover:bg-zinc-700 w-max h-max p-2 cursor-pointer"},we)]),e("form",{onSubmit:ne(D,["prevent"]),class:"rounded-xl"},[e("div",Pe,[e("div",Ve,[e("div",Ce,[e("div",Te,[Me,e("div",Se,[m(X,ie({modelValue:t(c),"onUpdate:modelValue":r[1]||(r[1]=s=>S(c)?c.value=s:null)},t(A),{onChange:r[2]||(r[2]=s=>t(o).quantity=t(c)),class:"block outline-none mt-1 w-full pl-4 py-2 bg-gray-50 dark:bg-zinc-800 hover:bg-gray-100 dark:hover:bg-zinc-900 placeholder-gray-400 dark:placeholder-zinc-600 border-gray-300 dark:border-zinc-600 focus:border-emerald-500 focus:ring-emerald-500 after:ring-emerald-500 dark:focus:border-emerald-500 dark:focus:ring-emerald-500 dark:after:ring-emerald-500 text-gray-800 dark:text-zinc-100 outline-0 hover:ring-0 after:border-emerald-600 focus:text-gray-800 focus:ring-0 dark:focus:bg-zinc-900 border rounded-md shadow-sm transition text-sm",placeholder:"2",autocomplete:"on",required:""}),null,16,["modelValue"])]),e("div",qe,[e("ul",Fe,[t(p).quantity?(n(),i("li",Le,l(t(p).quantity),1)):q("",!0),(n(!0),i(F,null,L(t(k).quantity,s=>(n(),i("li",{key:s},l(s),1))),128))])])]),e("div",Ne,[je,m(Y,{class:"dark:border-zinc-70 !text-zinc-900 dark:!text-zinc-200",id:"ajax",modelValue:t(b),"onUpdate:modelValue":r[3]||(r[3]=s=>S(b)?b.value=s:null),options:t(z),"close-on-select":!0,"internal-search":!1,"preserve-search":!0,"clear-on-select":!1,allowEmpty:!1,label:"text","track-by":"id",showLabels:!1,placeholder:t(_),clearable:!1,onSelect:$,onSearchChange:Q,loading:t(V)},{search:d(()=>[e("div",null,l(a.search),1)]),noResult:d(()=>[h("Produk tidak ditemukan..")]),default:d(()=>[e("template",Be,[e("div",Ie,[e("span",Re,l(a.props.option.title),1),e("span",Ee,l(a.props.option.desc),1)])])]),_:1},8,["modelValue","options","placeholder","loading"]),e("div",He,[e("ul",Oe,[t(p).product_id?(n(),i("li",Ue,l(t(p).product_id),1)):q("",!0),(n(!0),i(F,null,L(t(k).product_id,s=>(n(),i("li",{key:s},l(s),1))),128))])])]),e("div",Ae,[De,e("div",Ge,l(t(y)(t(u))),1)]),e("div",Ke,[$e,e("div",Je,l(t(y)(t(o).payment_amount)),1)])])])]),e("div",Qe,[e("button",{disabled:t(x),class:"font-bold transition ease-in-out justify-center inline-flex items-center p-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg w-full disabled:opacity-75 disabled:cursor-not-allowed"},[de(e("div",We,null,512),[[ce,t(x)]]),t(x)?(n(),i("span",Xe,"Menyimpan...")):(n(),i("span",Ye,"Simpan Data Produk"))],8,Ze)])],40,ze)]),_:1},8,["modelValue"])])}}};export{it as default};
